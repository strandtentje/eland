{
	slugs = FilesystemBrowser(rootpath = f"../problems/pages") {
		fileitem->Template(f"templates/slugoption.html");
	};

	prestatieform = Template(f"templates/prestatieform.html") {
		slugs->slugs;
	};

	matrixops = Template(f"templates/matrixform.html") {
		slugs->slugs;
	};

	fail = Template(f"templates/fail.html");

	panel = <f"view.conf@begin"> {
		headerops->prestatieform;
		scoreops->Template(f"templates/scoreform.html");
		teamops->Template(f"templates/teamform.html");
		matrixops->matrixops;
		style->Template(f"styles/controller.css");
		metatags->StubService();
	};

	team = <f"set.conf@idname"> {
		writer->DataWriter(f"queries/SetTeamName.sql") {
			changed_1->panel;
		};
	};

	prestatie = <f"set.conf@idnameslug"> {
		writer->DataWriter(f"queries/SetPrestatie.sql") {
			changed_1->panel;
		};
	};

	scoreset = GetFieldReader(
		field_prestatie = "^[0-9]+$",
		field_team = "^[0-9]+$") {
		form->fail;
		successful->PostFieldReader(
			field_amount = "^\\-?[0-9]+$") {
			form->fail;
			successful->DataWriter(f"queries/AddBehaald.sql") {
				changed_1->panel;
			};
		};
	};

	nieuw = Dir() {
		default->panel;
		team-><f"set.conf@name"> {
			writer->DataWriter(f"queries/AddTeam.sql") {
				changed_1->panel;
			};
		};
		prestatie-><f"set.conf@nameslug"> {
			writer->DataWriter(f"queries/AddPrestatie.sql") {
				changed_1->panel;
			};
		}
	};

	legen = DataWriter(f"queries/VerwijderBehaald.sql") {
		changed_1->DataWriter(f"queries/VerwijderTeam.sql") {
			changed_1->DataWriter(f"queries/VerwijderPrestatie.sql") {
				changed_1->Template(f"templates/klaar.html");
			};
		};
	};

	passlegen = PostFieldReader(
		field_wachtwoord = "^maapytoot$") {
		successful->legen;
		form->fail;
	};

	instances = {



		begin = BasicSingleLogin(username = "lancie", password = "slaapmuts69", realm = "cenc") {
			failure->fail;
			successful->Dir() {
				main->panel;
				team->team;
				prestatie->prestatie;
				score->scoreset;
				nieuw->nieuw;
				legen->passlegen;
			}
		};
	};
}
