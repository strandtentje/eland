{
	instances = {
		fail = Template(templatefile = f"templates/fail.html");

		slugs = FilesystemBrowser(rootpath = f"../problems/pages") {
			fileitem_branch = Template(templatefile = f"templates/slugoption.html");
		};

		prestatieform = Template(templatefile = f"templates/prestatieform.html") {
			slugs_branch = instances.slugs;
		};

		matrixops = Template(templatefile = f"templates/matrixform.html") {
			slugs_branch = instances.slugs;
		};

		panel = Module(file = f"view.conf", branch = "begin") {
			headerops_branch = instances.prestatieform;
			scoreops_branch = Template(templatefile = f"templates/scoreform.html");
			teamops_branch = Template(templatefile = f"templates/teamform.html");
			matrixops_branch = instances.matrixops;
			style_branch = Template(templatefile = f"styles/controller.css");
			metatags_branch = StubService();
		};

		team = Module(file = f"set.conf", branch = "idname") {
			writer_branch = MySqlQuerier(
				credset = "stortneer", query = f"queries/SetTeam.sql",
				params = ["id", "naam"]) {
				successful_branch = instances.panel;
			};
		};

		prestatie = Module(file = f"set.conf", branch = "idnameslug") {
			writer_branch = MySqlQuerier(
				credset = "stortneer", query = f"queries/SetPrestatie.sql",
				params = ["id", "naam", "slug"]) {
				successful_branch = instances.panel;
			};
		};

		scoreset = GetFieldReader(
			field_prestatie = "^[0-9]+$",
			field_team = .field_prestatie) {
			form_branch = instances.fail;
			successful_branch = PostFieldReader(
				field_amount = "^\\-?[0-9]+$") {
				form_branch = instances.fail;
				successful_branch = MySqlQuerier(
					credset = "stortneer", query = f"queries/AddBehaald.sql",
					params = ["prestatie", "team", "amount"]) {
					successful_branch = instances.panel;
				};
			};
		};

		nieuw = SiteSubsection() {
			default_branch = instances.panel;
			team_branch = Module(file = f"set.conf", branch = "name") {
				writer_branch = MySqlQuerier(params = ["naam"], 
					credset = "stortneer", query = f"queries/AddTeam.sql") {
					successful_branch = instances.panel;
				};
			};
			prestatie_branch = Module(file = f"set.conf", branch = "nameslug") {
				writer_branch = MySqlQuerier(params = ["naam", "slug"],
					credset = "stortneer", query = f"queries/AddPrestatie.sql") {
					successful_branch = instances.panel;
				};
			}
		};

		legen = MySqlQuerier(credset = "stortneer", 
			query = f"queries/VerwijderBehaald.sql") {
			successful_branch = MySqlQuerier(credset = "stortneer",
				query = f"queries/VerwijderTeam.sql") {
				successful_branch = MySqlQuerier(credset = "stortneer",
					query = f"queries/VerwijderPrestatie.sql") {
					successful_branch = Template(templatefile = f"templates/klaar.html");
				};
			};
		};

		passlegen = PostFieldReader(
			field_wachtwoord = "^maapytoot$") {
			successful_branch = instances.legen;
			form_branch = instances.fail;
		};

		begin = BasicSingleLogin(username = "lancie", password = "slaapmuts69", realm = "cenc") {
			failure_branch = instances.fail;
			successful_branch = SiteSubsection() {
				main_branch = instances.panel;
				team_branch = instances.team;
				prestatie_branch = instances.prestatie;
				score_branch = instances.scoreset;
				nieuw_branch = instances.nieuw;
				legen_branch = instances.passlegen;
			}
		};
	};
}