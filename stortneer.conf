{
	style = Template(f"styles/swag.css");

	content = Dir() {
		main->Template(f"templates/home.html");
		wiki-><f"wiki/agwiki.conf@begin">(baseurl = "/wiki");
		register-><f"perm/ission.conf@check">(
			resource = "user", action = "create"
		) {
			granted-><f"login/auth.conf@register">;
		};
		login-><f"perm/ission.conf@check">(
			resource = "session", action = "create"
		) {
			granted-><f"login/auth.conf@identify">;
		};
	};

	skeleton = Template(f"templates/skelet.html") {
		style->style;
		content->content;
		register-><f"perm/ission.conf@check">(
			resource = "user", action = "create"
		) {
			granted->Template(f"templates/registerlink.html");
		};
		logout-><f"perm/ission.conf@check">(
			resource = "session", action = "delete"
		) {
			granted->Template(f"templates/logoutlink.html");
		};
		login-><f"perm/ission.conf@check">(
			resource = "session", action = "create"
		) {
			granted->Template(f"templates/loginlink.html");
		};
	};

	dbcon = "Server=localhost; Database=stortneer; User ID=stortneer; Password=stortneer; Pooling=true; Allow User Variables=True";

	instances = {
		connectors = 
			Connector(name = "stortneer", connectionstring = dbcon) & 
			Connector(name = "agwiki", connectionstring = dbcon) & 
			Connector(name = "aglogin",connectionstring = dbcon) & 
			Connector(name = "agperm",connectionstring = dbcon);

		begin = Dir() {
			default-><f"login/auth.conf@enticate">(
				login = -1, username = "guest"
			) {
				authenticated->skeleton;
				unauthenticated->skeleton;
			};

			static->Fileserver(f"static");

			score-><f"score/view.conf@begin">;

			aanpassen-><f"score/controller.conf@begin">;

			problems-><f"problems/view.conf@begin">;

			logout = <f"perm/ission.conf@check">(
				resource = "session", action = "delete"
			) {
				granted-><f"login/auth.conf@end"> {
					ended->skeleton;
				};
			};
		};
	};
}
